<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, viewport-fit=cover"/>
<title>Nathan Homann</title>
<link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/feather-icons"></script>
<style>
:root {
  --main-green: #00852c;
  --main-blue: #003f66;
  --main-black: #28282f;
}

section::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
section::-webkit-scrollbar-track {
  background: var(--main-blue);
}
section::-webkit-scrollbar-thumb {
  background: var(--main-green);
  border-radius: 9999px;
  border: 2px solid var(--main-blue);
}
section::-webkit-scrollbar-thumb:hover {
  background: var(--main-green);
}
section {
  scrollbar-color: var(--main-green) var(--main-blue);
  scrollbar-width: thin;
}
.vertical-text {
  font-family: monospace;
  text-transform: uppercase;
  writing-mode: vertical-lr;
  text-orientation: upright;
}
.cursor-grab {
  cursor: grab;
}
.cursor-grabbing {
  cursor: grabbing;
}
.card-icon {
  width: 84px;
  height: 84px;
  object-fit: cover;
  background: var(--main-blue);
}

/* Hide scrollbar on main container */
main {
  scrollbar-width: none; /* Firefox */
}
main::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}
</style>
</head>
<body class="relative bg-gradient-to-br from-[var(--main-black)] via-gray-900 to-[var(--main-black)] text-white font-sans antialiased" onload="feather.replace()" style="padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom);padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);">

<header class="flex items-center justify-between p-4 sticky top-0 z-50 shadow-lg" style="background-color: var(--main-green);">
  <h1 class="font-serif text-2xl">Nathan Homann</h1>
</header>

<div id="menu-handle" class="fixed top-0 bottom-0 left-0 w-12 bg-transparent z-40 pointer-events-none flex items-center justify-center">
  <button id="menu-handle-button-left" class="pointer-events-auto cursor-pointer bg-transparent w-full h-full" aria-label="Toggle left menu"></button>
</div>
<div id="menu-handle-right" class="fixed top-0 bottom-0 right-0 w-12 bg-transparent z-40 pointer-events-none flex items-center justify-center">
  <button id="menu-handle-button-right" class="pointer-events-auto cursor-pointer bg-transparent w-full h-full" aria-label="Toggle right menu"></button>
</div>

<main class="p-4 relative z-10" style="height:calc(100vh - 8rem);overflow:auto;position:relative;">

  <div class="flex h-full relative">
    <aside id="sidebar" class="w-64 p-4 flex-shrink-0 flex flex-col overflow-auto absolute top-0 bottom-0 left-0 transform -translate-x-full transition-transform duration-300 z-50 bg-[var(--main-black)] shadow-lg h-full" style="border-right:4px solid var(--main-green);">
      <h2 class="font-serif text-xl mb-2">Toolbox</h2>
      <section id="menu-section" class="flex-1 overflow-y-auto overflow-x-hidden space-y-2 pr-1">
        <div id="menu-list" class="space-y-2 text-xs pr-3"></div>
      </section>
      <div class="my-4 h-2 rounded-full" style="background-color: var(--main-green);"></div>
      <section id="skills-section" class="overflow-x-auto overflow-y-hidden p-2 whitespace-nowrap cursor-grab select-none shadow-inner" style="background-color: var(--main-black);">
        <div id="skills-graph" class="flex items-end justify-start space-x-2 flex-nowrap"></div>
      </section>
    </aside>

    <aside id="sidebar-right" class="w-64 p-4 flex-shrink-0 flex flex-col overflow-auto absolute top-0 bottom-0 right-0 transform translate-x-full transition-transform duration-300 z-50 bg-[var(--main-black)] shadow-lg h-full" style="border-left:4px solid var(--main-green);">
      <h2 class="font-serif text-xl mb-2">Toolbox</h2>
      <section id="menu-section-right" class="flex-1 overflow-y-auto overflow-x-hidden space-y-2 pr-1">
        <div id="menu-list-right" class="space-y-2 text-xs pr-3"></div>
      </section>
      <div class="my-4 h-2 rounded-full" style="background-color: var(--main-green);"></div>
      <section id="skills-section-right" class="overflow-x-auto overflow-y-hidden p-2 whitespace-nowrap cursor-grab select-none shadow-inner" style="background-color: var(--main-black);">
        <div id="skills-graph-right" class="flex items-end justify-start space-x-2 flex-nowrap"></div>
      </section>
    </aside>

    <section class="flex-1 p-6 backdrop-blur-sm space-y-8 overflow-auto ml-0 shadow-xl" style="background-color: var(--main-black); background-color: rgba(0,0,0,0.5);">
      <section class="bg-black/30 backdrop-blur-md p-8 flex flex-col items-center justify-center text-center shadow-lg" style="background-color: rgba(0,0,0,0.3);">
        <img src="https://picsum.photos/200" alt="Engineer profile" class="rounded-full mb-4 shadow-lg"/>
        <h2 class="font-serif text-2xl mb-4">Engineer Spotlight</h2>
        <p class="mb-4 max-w-md">Learn about the dedicated professionals driving innovation and excellence in engineering.</p>
        <button class="px-4 py-2 text-black rounded-lg hover:bg-[var(--main-green)] transition-colors shadow-md" style="background-color: var(--main-green);" aria-label="Open LinkedIn Profile">LinkedIn</button>
      </section>
      <section class="space-y-6" id="cards-container"></section>
    </section>
  </div>
</main>

<footer class="p-4 text-center sticky bottom-0 z-50 shadow-lg rounded-t-lg" style="background-color: var(--main-green);">
  <p>Â© 2024</p>
</footer>

<script>
function getFeatherIconForDomain(domain) {
  if(!domain) return null;
  const lowerDomain = domain.toLowerCase();
  if (lowerDomain.includes('linkedin')) {
    return 'linkedin';
  } else if (lowerDomain.includes('facebook')) {
    return 'facebook';
  } else if (lowerDomain.includes('twitch')) {
    return 'tv';
  }
  return null;
}

fetch('cards.json')
  .then(response => response.json())
  .then(data => {
    const container = document.getElementById('cards-container');
    const menuList = document.getElementById('menu-list');
    const menuListRight = document.getElementById('menu-list-right');
    data.forEach((card) => {
      let imgSrc = card.public_image || card.local_image;
      let domain = '';
      if (card.url) {
        try {
          const urlObj = new URL(card.url);
          domain = urlObj.hostname;
        } catch (e) {}
      }
      if(!imgSrc && domain) {
        imgSrc = `assets/images/icons/cards/${domain}.png`;
      } else if(!imgSrc) {
        imgSrc = 'https://picsum.photos/64';
      }

      if(card.Type==="Tool"){
        const menuItem = document.createElement('a');
        menuItem.href='#';
        menuItem.className='flex items-center text-white hover:text-black hover:bg-[var(--main-green)] p-1 space-x-2 transition-colors shadow-sm rounded-lg';
        menuItem.ariaLabel=card.title;

        const faviconImg = document.createElement('img');
        faviconImg.className='w-5 h-5 rounded';
        faviconImg.alt=card.title+' icon';
        let menuImgSrc=imgSrc;
        let triedFaviconMenu=false;
        if(menuImgSrc.includes('picsum') && domain) {
          menuImgSrc=`https://www.google.com/s2/favicons?sz=64&domain=${domain}`;
        }
        faviconImg.src=menuImgSrc;
        faviconImg.addEventListener('error',()=>{
          if(!triedFaviconMenu && domain){
            triedFaviconMenu=true;
            faviconImg.src=`https://www.google.com/s2/favicons?sz=64&domain=${domain}`;
          } else {
            faviconImg.src='https://picsum.photos/64';
          }
        });

        const menuText = document.createElement('span');
        menuText.textContent=card.title;
        menuItem.appendChild(faviconImg);
        menuItem.appendChild(menuText);
        menuList.appendChild(menuItem);
        const menuItemRight=menuItem.cloneNode(true);
        menuListRight.appendChild(menuItemRight);
      }

      if(card.Type==="Body"){
        const article=document.createElement('article');
        article.className='bg-gradient-to-br from-white/5 via-white/10 to-white/5 backdrop-blur-lg p-4 rounded-lg flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4 shadow-lg transition-transform hover:scale-[1.01]';

        const cardImg=document.createElement('img');
        cardImg.className='card-icon shadow-md';
        cardImg.alt=card.title?card.title+' icon':'Card icon';
        cardImg.src=imgSrc;
        let triedFavicon=false;
        cardImg.addEventListener('error',()=>{
          if(card.url && !triedFavicon){
            triedFavicon=true;
            try{
              const fallbackDomain=new URL(card.url).hostname;
              const featherIcon=getFeatherIconForDomain(fallbackDomain);
              if(featherIcon){
                const span=document.createElement('span');
                span.setAttribute('data-feather',featherIcon);
                span.style.width='84px';
                span.style.height='84px';
                span.style.display='inline-flex';
                span.style.alignItems='center';
                span.style.justifyContent='center';
                span.style.backgroundColor='var(--main-green)';
                span.style.borderRadius='50%';
                span.style.padding='10px';
                span.style.color='#fff';
                article.replaceChild(span,cardImg);
                feather.replace();
              } else {
                cardImg.src='https://picsum.photos/84';
              }
            }catch(e){
              cardImg.src='https://picsum.photos/84';
            }
          } else {
            cardImg.src='https://picsum.photos/84';
          }
        });

        const contentDiv=document.createElement('div');
        const titleEl=document.createElement('h2');
        titleEl.className='font-serif text-xl';
        titleEl.textContent=card.title;
        const descEl=document.createElement('p');
        descEl.textContent=card.description||'';
        contentDiv.appendChild(titleEl);
        contentDiv.appendChild(descEl);

        if(card.url){
          const linkEl=document.createElement('a');
          linkEl.href=card.url;
          linkEl.target='_blank';
          linkEl.rel='noopener noreferrer';
          linkEl.className='inline-block text-black px-3 py-1 mt-2 rounded-lg hover:bg-[var(--main-green)] transition-colors shadow-sm';
          linkEl.style.backgroundColor='var(--main-green)';
          linkEl.ariaLabel='Visit '+card.title;
          linkEl.textContent='Visit';
          contentDiv.appendChild(linkEl);
        }

        article.appendChild(cardImg);
        article.appendChild(contentDiv);
        container.appendChild(article);
      }
    });
  })
  .catch(error=>console.error('Error loading cards:',error));
</script>

<script>
fetch('skills.json')
  .then(response=>response.json())
  .then(skills=>{
    const graphContainer=document.getElementById('skills-graph');
    const graphContainerRight=document.getElementById('skills-graph-right');
    skills.forEach(skillObj=>{
      const {skill,level,icon}=skillObj;
      const percentage=level*10;
      const barWrapper=document.createElement('div');
      barWrapper.className='flex flex-col items-center space-y-1';

      const iconWrapper=document.createElement('div');
      iconWrapper.className='w-8 h-8 rounded-full flex items-center justify-center shadow-inner';
      iconWrapper.style.background=`linear-gradient(to top, var(--main-green) ${percentage}%, var(--main-blue) ${percentage}%)`;

      const iconImg=document.createElement('img');
      iconImg.src=icon;
      iconImg.alt=skill+' icon';
      iconImg.className='w-4 h-4';
      iconImg.addEventListener('error',()=>{
        iconWrapper.innerHTML='';
        const span=document.createElement('span');
        span.setAttribute('data-feather','tool');
        span.style.color='#fff';
        iconWrapper.appendChild(span);
        feather.replace();
      });

      iconWrapper.appendChild(iconImg);

      const label=document.createElement('div');
      label.className='vertical-text font-bold text-xs leading-none';
      skill.split('').forEach((char,index)=>{
        const charSpan=document.createElement('span');
        charSpan.className=index%2===0?'text-white':'text-[var(--main-green)]';
        charSpan.textContent=char;
        label.appendChild(charSpan);
      });

      barWrapper.appendChild(label);
      barWrapper.appendChild(iconWrapper);
      graphContainer.appendChild(barWrapper);

      const barWrapperRight=barWrapper.cloneNode(true);
      graphContainerRight.appendChild(barWrapperRight);
    });
  })
  .catch(error=>console.error('Error loading skills:',error));
</script>

<script>
const skillsSection=document.getElementById('skills-section');
let isDown=false;
let startX;
let scrollLeft;
skillsSection.addEventListener('mousedown',(e)=>{
  isDown=true;
  skillsSection.classList.add('cursor-grabbing');
  startX=e.pageX - skillsSection.offsetLeft;
  scrollLeft=skillsSection.scrollLeft;
});
skillsSection.addEventListener('mouseleave',()=>{
  isDown=false;
  skillsSection.classList.remove('cursor-grabbing');
});
skillsSection.addEventListener('mouseup',()=>{
  isDown=false;
  skillsSection.classList.remove('cursor-grabbing');
});
skillsSection.addEventListener('mousemove',(e)=>{
  if(!isDown)return;
  e.preventDefault();
  const x=e.pageX - skillsSection.offsetLeft;
  const walk=(x - startX);
  skillsSection.scrollLeft=scrollLeft - walk;
});

const skillsSectionRight=document.getElementById('skills-section-right');
let isDownRight=false;
let startXRight;
let scrollLeftRight;
skillsSectionRight.addEventListener('mousedown',(e)=>{
  isDownRight=true;
  skillsSectionRight.classList.add('cursor-grabbing');
  startXRight=e.pageX - skillsSectionRight.offsetLeft;
  scrollLeftRight=skillsSectionRight.scrollLeft;
});
skillsSectionRight.addEventListener('mouseleave',()=>{
  isDownRight=false;
  skillsSectionRight.classList.remove('cursor-grabbing');
});
skillsSectionRight.addEventListener('mouseup',()=>{
  isDownRight=false;
  skillsSectionRight.classList.remove('cursor-grabbing');
});
skillsSectionRight.addEventListener('mousemove',(e)=>{
  if(!isDownRight)return;
  e.preventDefault();
  const x=e.pageX - skillsSectionRight.offsetLeft;
  const walk=(x - startXRight);
  skillsSectionRight.scrollLeft=scrollLeftRight - walk;
});

const sidebar=document.getElementById('sidebar');
const menuHandleButtonLeft=document.getElementById('menu-handle-button-left');
function toggleSidebar(){
  sidebar.classList.toggle('-translate-x-full');
}
menuHandleButtonLeft.addEventListener('click',toggleSidebar);

const sidebarRight=document.getElementById('sidebar-right');
const menuHandleButtonRight=document.getElementById('menu-handle-button-right');
function toggleSidebarRight(){
  sidebarRight.classList.toggle('translate-x-full');
}
menuHandleButtonRight.addEventListener('click',toggleSidebarRight);

document.addEventListener('click',(e)=>{
  const isClickInsideSidebar=sidebar.contains(e.target);
  const isClickOnToggle=menuHandleButtonLeft.contains(e.target);
  if(!isClickInsideSidebar&&!isClickOnToggle&&!sidebar.classList.contains('-translate-x-full')){
    sidebar.classList.add('-translate-x-full');
  }
  const isClickInsideSidebarRight=sidebarRight.contains(e.target);
  const isClickOnToggleRight=menuHandleButtonRight.contains(e.target);
  if(!isClickInsideSidebarRight&&!isClickOnToggleRight&&!sidebarRight.classList.contains('translate-x-full')){
    sidebarRight.classList.add('translate-x-full');
  }
});
</script>

</body>
</html>
